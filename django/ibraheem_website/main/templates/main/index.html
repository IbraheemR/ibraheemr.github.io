{% extends "main/base.html" %}
{% load staticfiles %}

{% block title %}
Home
{% endblock title %}

{% block viewname %}index{% endblock viewname %}

{% block head %}
<link rel="stylesheet" href="{% static 'main/css/post_cards.css' %}">
<link rel="stylesheet" href="{% static 'main/css/slides.css' %}">

<style>
    body {
        padding: 0;
    }
</style>
{% endblock head %}

{% block first_content %}
    <section class="slideshow">
        
        {% for s in slides %}
            <a class="slide" href="{{ s.link }}" id="{{ s.id }}">
                <img src="{{ s.get_image_url }}">
                {% if s.caption %}
                    <h1 class="caption">{{ s.caption }}</h1>             
                {% endif %}

            </a>
        {% endfor %}

        <script>
            var ids = [{% for s in slides %}{{ s.id }},{% endfor %}]

            //add frost effect to navbar
            $("nav").addClass("frosted")

            var mainbottom = 100;

            // on scroll, 
            $(window).on('scroll',function(){

                // we round here to reduce a little workload
                stop = Math.round($(window).scrollTop());
                if (stop > mainbottom) {
                    $('nav').removeClass('frosted');
                } else {
                    $('nav').addClass('frosted');
            }

            });
        </script>



        <div class="info frosted" id="timeleft"></div>

        <div id="button-container">
        <!-- Buttons generated by JS --> 
        </div>
    </section>

    <script src="{% static 'main/js/slideshow.js' %}"></script>

{% endblock first_content %}


{% block centred_content %}

    {% for p in posts %}
        <a class="post card hoverable {% if not p.get_icon_url %}noimage{% endif %}" href="{{ p.get_link }}" >

            {% if p.was_published_recently %}
                <span class="new">NEW</span>
            {% endif %}
            <span class="id">#{{ p.id }}</span>

            {% if p.get_icon_url %}
                <img src="{{ p.get_icon_url }}">
            {% endif %}

            <h2>{{ p.title }}</h2>
            {% if p.description %}
                <p>{{ p.description }}</p>
            {% endif %}
        </a>
    {% endfor %}

{% endblock centred_content %}